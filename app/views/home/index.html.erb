<h1>Dashboard</h1>

<div class="panel panel-info">
  <div class="panel-heading">My Status and My Remaining Meal Plan
  </div>
  <div class="panel-body">
    <%= form_for current_user, url: edit_status_path, html: { method: :put }, remote: true do |f| %>
      <div class="row">
        <% for sym, collection in [[:status, User::STATUSES], [:location, User::LOCATIONS]] %>
          <div class="col-xs-3">
            <div class="form-group required">
              <%= f.label sym, "My current #{sym.to_s}", class: 'control-label'  %><br />
              <%= f.select sym, collection.map.with_index.to_a, required: true, class: "form-control" %>
            </div>
          </div>
        <% end %>
      </div>
      <div class="row">
        <div class="col-xs-3"> 
          <div class="form-group">
            <%= f.label :description, "Notes", class: 'control-label'  %><br />
            <%= f.text_area :description, class: "form-control" %>
          </div>
        </div>
        <% for sym in [:dinex, :blocks, :guest_blocks] %>
          <div class="col-xs-2">
            <div class="form-group">
              <%= f.label sym, "My #{sym.to_s.humanize.downcase}", class: 'control-label'  %><br />
              <%= f.number_field sym, min: 0, class: "form-control" %>
            </div>
          </div>
        <% end %>
      </div>
      <div class="actions">  
        <%= f.button "Update", class: 'btn', data: {disable_with: load_icon("Updating") } %>
      </div>
    <% end %>
  </div>
</div>

<h1>Live Listings Feed</h1>
<div class="row">
  <div class="col-xs-6">
    <h3>Current Buyers</h3>
    <section>
      <%= render 'users/users', users: @users.buyers, data_channel: "buyers" %>
    </section>
  </div>
  <div class="col-xs-6">
    <h3>Current Sellers</h3>
    <section>
      <%= render 'users/users', users: @users.sellers, data_channel: "sellers" %>
    </section>
  </div>
</div>